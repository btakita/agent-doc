<idea-plugin require-restart="false">
    <id>com.github.btakita.agent-doc</id>
    <name>Agent Doc</name>
    <vendor url="https://github.com/btakita">btakita</vendor>
    <description><![CDATA[
        Submit markdown documents to AI agents via agent-doc.

        Press a hotkey to route <code>/agent-doc path/to/file.md</code> to the correct
        Claude Code session via tmux. Supports multiple concurrent sessions â€”
        each document routes to its own tmux pane based on the session UUID
        in the YAML frontmatter.
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>

    <extensions defaultExtensionNs="com.intellij">
        <notificationGroup id="Agent Doc"
                           displayType="BALLOON"
                           isLogByDefault="true"/>
    </extensions>

    <projectListeners>
        <listener class="com.github.btakita.agentdoc.PluginLifecycleListener"
                  topic="com.intellij.openapi.project.ProjectManagerListener"/>
        <listener class="com.github.btakita.agentdoc.EditorTabSyncListener"
                  topic="com.intellij.openapi.fileEditor.FileEditorManagerListener"/>
    </projectListeners>

    <actions>
        <action id="AgentDoc.Popup"
                class="com.github.btakita.agentdoc.AgentDocPopupAction"
                text="Agent Doc Actions"
                description="Show Agent Doc actions for the current markdown file">
            <keyboard-shortcut first-keystroke="alt ENTER" keymap="$default"/>
        </action>
        <action id="AgentDoc.Submit"
                class="com.github.btakita.agentdoc.SubmitAction"
                text="Run Agent Doc"
                description="Route /agent-doc command to the correct Claude session via tmux">
            <keyboard-shortcut first-keystroke="ctrl shift alt A" keymap="$default"/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="AgentDoc.Claim"
                class="com.github.btakita.agentdoc.ClaimAction"
                text="Claim for Tmux Pane"
                description="Claim this document for the currently active tmux pane">
            <keyboard-shortcut first-keystroke="ctrl shift alt C" keymap="$default"/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
        </action>
        <action id="AgentDoc.SyncLayout"
                class="com.github.btakita.agentdoc.SyncLayoutAction"
                text="Sync Tmux Layout"
                description="Re-sync tmux pane layout to match the current editor split">
            <keyboard-shortcut first-keystroke="ctrl shift alt L" keymap="$default"/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
